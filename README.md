# SPARCS Dataset Predictive Analysis

## Overview
This project implements a comprehensive predictive analysis on the SPARCS (Statewide Planning and Research Cooperative System) dataset from New York State. The analysis includes data preparation, feature engineering, and building predictive models for hospital discharges, costs, and charges.

## Dataset
The analysis uses the "Hospital Inpatient Discharges (SPARCS De-Identified)" dataset from the New York State Department of Health. This dataset contains information about hospital discharges, costs, and charges by facility, APR DRG code, and severity of illness.

## Project Structure
- `sparcs_analysis.py`: Main Python script containing the complete analysis
- `README.md`: This file, containing project documentation
- Output files generated by the analysis:
  - `forecast_hospital_drg_metrics.csv`: Predicted hospital and DRG-specific metrics
  - `forecast_total_drg_discharges.csv`: Predicted total discharges by DRG type
  - `forecast_mean_costs.csv`: Predicted mean costs
  - `feature_importance.png`: Feature importance plots for the models
  - `shap_discharges.png` & `shap_mean_cost.png`: SHAP values for model interpretation
  - `predictions_vs_actual.png`: Visualizations comparing predicted vs actual values

## Tasks Implemented
1. **Hospital & DRG Specific Metrics Prediction**
   - Predict discharges, median costs, and median charges for each hospital and DRG combination
   
2. **Total Discharges by DRG Type Prediction**
   - Predict total expected discharges by DRG type across all hospitals in NY State
   
3. **Mean Cost per Discharge Prediction**
   - Predict mean cost based on facility, DRG code, severity of illness, and other factors

## Requirements
- Python 3.7+
- pandas
- numpy
- matplotlib
- seaborn
- scikit-learn
- shap

## Installation
```bash
pip install pandas numpy matplotlib seaborn scikit-learn shap
```

## Usage
To run the analysis:
```bash
python sparcs_analysis.py
```

## Methods
- **Data Preprocessing**: Handling missing values, converting data types, and cleaning the dataset
- **Feature Engineering**: Creating historical aggregates, year-over-year changes, and temporal indicators
- **Modeling**: Using scikit-learn's GradientBoostingRegressor for regression tasks with temporal validation
- **Evaluation**: Using RMSE, MAE, and RÂ² for model performance assessment
- **Interpretation**: Feature importance and SHAP value analysis
- **Forecasting**: Predicting metrics for the next year beyond the latest available data

## Results
The analysis generates predictions for hospital discharges, costs, and charges, which can be used for healthcare planning, budgeting, and resource allocation. 